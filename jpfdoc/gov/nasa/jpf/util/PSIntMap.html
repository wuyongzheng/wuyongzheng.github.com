<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Tue Jul 02 15:51:43 SGT 2013 -->
<title>PSIntMap (JPF API)</title>
<meta name="date" content="2013-07-02">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PSIntMap (JPF API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PSIntMap.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/nasa/jpf/util/Processor.html" title="interface in gov.nasa.jpf.util"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/nasa/jpf/util/PSIntMap.BitmapNode.html" title="class in gov.nasa.jpf.util"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/nasa/jpf/util/PSIntMap.html" target="_top">Frames</a></li>
<li><a href="PSIntMap.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.nasa.jpf.util</div>
<h2 title="Class PSIntMap" class="title">Class PSIntMap&lt;V&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../../../java/lang/Object.html" title="class in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>gov.nasa.jpf.util.PSIntMap&lt;V&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;V&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">PSIntMap&lt;V&gt;</span>
extends <a href="../../../../java/lang/Object.html" title="class in java.lang">Object</a>
implements <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;V&gt;</pre>
<div class="block">Persistent (immutable) associative array that maps integer keys to generic reference values.
 <p>
 PSIntMap is implemented as a bitwise trie which processes key bits in msb order
 (from left to right) and has the same depth along all paths (i.e. values are only kept at the
 terminal node level, which corresponds to the rightmost bit block in the key).
 
 This particular implementation was chosen to optimize performance for dense key value domains,
 e.g. keys that are computed from counters. More specifically, PSIntMap was designed to be a
 suitable basis for JPF Heap implementations with their characteristic usage pattern:
   ..
   transition{ ..alloc( n),..alloc(n+1),..alloc(n+2), ..}, garbage-collection{ remove(x),remove(y),..}
   ..
 
 The 32bit keys are broken up into 5bit blocks that represent the trie levels, each 5bit block
 (0..31) being the index for the respective child node or value.
 For instance, a key/value pair of 12345->'x' is stored as
 <blockquote><pre>
   level:     6    5     4     3     2     1     0
   key:       00.00000.00000.00000.01100.00001.11001  = 12345
   block-val:  0     0     0     0    12     1    25
 
       Node0 (level 2 : nodes)
         ... 
         [12] -> Node1 (level 1 : nodes)
                   ...
                   [1] -> Node2 (level 0 : values)
                            ...
                           [25] -> 'x'
</pre></blockquote>
 The main benefit of using this representation is that existing maps are never modified (are
 persistent) and hence a previous state can be restored by simply keeping the reference of
 the respective map. The main drawback is that not only the changed value has to be stored
 upon add/remove, but everything from the node that contains this value up to the root node.
 
 This implementation partitions keys from left (msb) to right, which has the major property that
 consecutive keys are stored in the same node, which in turn allows for efficient caching of
 the last modified node. Keeping track of this 'stagingNode' avoids copying anything
 but the affected node until the next staging node miss, at which point the old stagingNode
 has to be merged. This merge only requires copying of old stagingNode parents up to the
 level that already has been copied due to the new key insertion that caused the stagingNode miss).
 
 The internal trie representation uses a protected Node type, which uses the bit block values (0..31)
 as index into an array that stores either child node references (in case this is not a
 terminal block), or value objects (if this is the terminal level). There are three Node
 subtypes that get promoted upon population in the following order:
 <ul>
  <li>OneNode - store only a single value/child element. Every node starts as a OneNode
  <li>BitmapNode - stores up to 31 elements (compressed)
  <li>FullNode - stores 32 elements
 </ul>
 Removal of keys leads to symmetric demotion of node types.
 
 The five major public operations for PersistentIntMaps are
 
 <ol>
  <li>set(int key, V value) -> PersistentIntMap : return a new map with an additional value 
  <li>get(int key) -> V : retrieve value
  <li>remove(int key) -> PersistentIntMap : return a new map without the specified key/value
  <li>removeAllSatisfying(Predicate<V> predicate) -> PersistentIntMap : return a new map
                             without all values satisfying the specified predicate
  <li>process(Processor<V> processor) : iterate over all values with specified processor
 </ol>
  
 Being a persistent data structure, the main property of PersistentIntMaps is that all
 add/remove operations (set,remove,removeAllSatisfying) have to return new PersistenIntMap
 instances, no destructive update is allowed. Normal usage patterns therefore look like this:
 
 <blockquote><pre>
   PSIntMap<String> map = PSIntMap<String>();
   ..
   map = map.set(42, "fortytwo"); // returns a new map
   ..
   map = map.remove(42); // returns a new map
   ..
   map = map.removeAllSatisfying( new Predicate<String>(){ // returns a new map
     public boolean isTrue (String val){ 
       return val.endsWith("two");
     });
     
   map.process( new Processor<String>(){
     public void process (String val){
       System.out.println(val);
     });
 </pre></blockquote>
 
 NOTE: bitwise tries are inherently recursive data structures, which would naturally lend
 itself to implementations using recursive methods (over nodes). However, the recursion
 is always bounded (finite number of key bits), and we need to keep track of the terminal
 (value) node that was modified, which means we would have to return two values from
 every recursion level (new current level node and new (terminal) stagingNode), thus
 requiring additional allocation per map operation ( e.g. 'result' object to keep track
 of transient state, as in "node = node.assoc(..key, value, result)") or per recursive call
 ( result: {node,stagingNode}, as in "result = node.assoc( ..key, value)"). The first solution
 would allow to create/store a result object on the caller site, but this could compromise
 map consistency in case of concurrent map operations. Both solutions are counter-productive
 in a sense that PSIntMap is optimized to minimize allocation count, which is the crux of
 persistent data structures.
 
 The approach that is taken here is to manually unroll the recursion by means of explicit
 operand stacks, which leads to methods with large number of local variables (to avoid
 array allocation) and large switch statements to set respective fields. The resulting
 programming style should only be acceptable for critical runtime optimizations.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.BitmapNode.html" title="class in gov.nasa.jpf.util">PSIntMap.BitmapNode</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.BitmapNode.html" title="type parameter in PSIntMap.BitmapNode">E</a>&gt;</strong></code>
<div class="block">A node that holds between 2 and 31 elements.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.FullNode.html" title="class in gov.nasa.jpf.util">PSIntMap.FullNode</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.FullNode.html" title="type parameter in PSIntMap.FullNode">E</a>&gt;</strong></code>
<div class="block">newElements node with 32 elements, for which we don't need newElements bitmap.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="type parameter in PSIntMap.Node">E</a>&gt;</strong></code>
<div class="block">Abstract root class for all node types.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.OneNode.html" title="class in gov.nasa.jpf.util">PSIntMap.OneNode</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.OneNode.html" title="type parameter in PSIntMap.OneNode">E</a>&gt;</strong></code>
<div class="block">Node that has only one element and hence does not need an array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.ValueIterator.html" title="class in gov.nasa.jpf.util">PSIntMap.ValueIterator</a></strong></code>
<div class="block">this is less efficient than using map.process(processor), but required to use PSIntMaps in lieu of ordinary containers
 Since PSIntMaps are bounded recursive data structures, we have to model newElements stack explicitly, but at least we know it is
 not exceeding newElements depth of 6 (5 bit index blocks)
 
 Note - there are no empty nodes.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#rootLevel">rootLevel</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#rootNode">rootNode</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#size">size</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#stagingNode">stagingNode</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#stagingNodeMask">stagingNodeMask</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#targetNode">targetNode</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#PSIntMap()">PSIntMap</a></strong>()</code>
<div class="block">the only public constructor</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#PSIntMap(int, int, gov.nasa.jpf.util.PSIntMap.Node, gov.nasa.jpf.util.PSIntMap.Node, gov.nasa.jpf.util.PSIntMap.Node, int)">PSIntMap</a></strong>(int&nbsp;size,
        int&nbsp;rootLevel,
        <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;rootNode,
        <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;stagingNode,
        <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;targetNode,
        int&nbsp;stagingNodeMask)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#countSize(int, gov.nasa.jpf.util.PSIntMap.Node)">countSize</a></strong>(int&nbsp;level,
         <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;node)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#get(int)">get</a></strong>(int&nbsp;key)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#iterator()">iterator</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../java/lang/String.html" title="class in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#keyDescription(int)">keyDescription</a></strong>(int&nbsp;key)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#mergeStagingNode()">mergeStagingNode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#mergeStagingNode(int, int, gov.nasa.jpf.util.PSIntMap.Node)">mergeStagingNode</a></strong>(int&nbsp;key,
                int&nbsp;newRootLevel,
                <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;newRootNode)</code>
<div class="block">this relies on that all nodes from the new staging node to the newRootNode have been copied
 and can be modified without cloning.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#printOn(java.io.PrintStream)">printOn</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;ps)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#process(gov.nasa.jpf.util.Processor)">process</a></strong>(<a href="../../../../gov/nasa/jpf/util/Processor.html" title="interface in gov.nasa.jpf.util">Processor</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;p)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#remove(int)">remove</a></strong>(int&nbsp;key)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#removeAllSatisfying(int, gov.nasa.jpf.util.PSIntMap.Node, gov.nasa.jpf.util.Predicate)">removeAllSatisfying</a></strong>(int&nbsp;level,
                   <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;node,
                   <a href="../../../../gov/nasa/jpf/util/Predicate.html" title="interface in gov.nasa.jpf.util">Predicate</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;pred)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#removeAllSatisfying(gov.nasa.jpf.util.Predicate)">removeAllSatisfying</a></strong>(<a href="../../../../gov/nasa/jpf/util/Predicate.html" title="interface in gov.nasa.jpf.util">Predicate</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;pred)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#set(int, V)">set</a></strong>(int&nbsp;key,
   <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;value)</code>
<div class="block">this either replaces or adds newElements new value</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#setInCurrentRootLevel(int, V)">setInCurrentRootLevel</a></strong>(int&nbsp;key,
                     <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;value)</code>
<div class="block">that's ugly, but if we use recursion we need newElements result object to obtain the new stagingNode and
 the size change, which means there would be an additional allocation per set() or newElements non-persistent,
 transient object that would need synchronization</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#setInNewRootLevel(int, int, V)">setInNewRootLevel</a></strong>(int&nbsp;newRootLevel,
                 int&nbsp;key,
                 <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;value)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#size()">size</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/nasa/jpf/util/PSIntMap.html#values()">values</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="../../../../java/lang/Object.html" title="class in java.lang">Object</a></h3>
<code><a href="../../../../java/lang/Object.html#clone()">clone</a>, <a href="../../../../java/lang/Object.html#equals(java.lang.Object)">equals</a>, <a href="../../../../java/lang/Object.html#finalize()">finalize</a>, <a href="../../../../java/lang/Object.html#getClass()">getClass</a>, <a href="../../../../java/lang/Object.html#hashCode()">hashCode</a>, <a href="../../../../java/lang/Object.html#notify()">notify</a>, <a href="../../../../java/lang/Object.html#notifyAll()">notifyAll</a>, <a href="../../../../java/lang/Object.html#toString()">toString</a>, <a href="../../../../java/lang/Object.html#wait()">wait</a>, <a href="../../../../java/lang/Object.html#wait(long)">wait</a>, <a href="../../../../java/lang/Object.html#wait(long, int)">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="size">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>protected final&nbsp;int size</pre>
</li>
</ul>
<a name="rootLevel">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rootLevel</h4>
<pre>protected final&nbsp;int rootLevel</pre>
</li>
</ul>
<a name="rootNode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rootNode</h4>
<pre>protected final&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a> rootNode</pre>
</li>
</ul>
<a name="stagingNode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stagingNode</h4>
<pre>protected final&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt; stagingNode</pre>
</li>
</ul>
<a name="stagingNodeMask">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stagingNodeMask</h4>
<pre>protected final&nbsp;int stagingNodeMask</pre>
</li>
</ul>
<a name="targetNode">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>targetNode</h4>
<pre>protected final&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a> targetNode</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PSIntMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PSIntMap</h4>
<pre>public&nbsp;PSIntMap()</pre>
<div class="block">the only public constructor</div>
</li>
</ul>
<a name="PSIntMap(int, int, gov.nasa.jpf.util.PSIntMap.Node, gov.nasa.jpf.util.PSIntMap.Node, gov.nasa.jpf.util.PSIntMap.Node, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PSIntMap</h4>
<pre>protected&nbsp;PSIntMap(int&nbsp;size,
        int&nbsp;rootLevel,
        <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;rootNode,
        <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;stagingNode,
        <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;targetNode,
        int&nbsp;stagingNodeMask)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="iterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iterator</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;iterator()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true#iterator()" title="class or interface in java.lang">iterator</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()</pre>
</li>
</ul>
<a name="get(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;get(int&nbsp;key)</pre>
</li>
</ul>
<a name="mergeStagingNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeStagingNode</h4>
<pre>protected&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;mergeStagingNode()</pre>
</li>
</ul>
<a name="mergeStagingNode(int, int, gov.nasa.jpf.util.PSIntMap.Node)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeStagingNode</h4>
<pre>protected&nbsp;void&nbsp;mergeStagingNode(int&nbsp;key,
                    int&nbsp;newRootLevel,
                    <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;newRootNode)</pre>
<div class="block">this relies on that all nodes from the new staging node to the newRootNode have been copied
 and can be modified without cloning.
 The modification does not change the node type since the old staging/target node was in the trie
 The first node where new and old staging indices differ is the mergeNode that needs to be
 modified (old staging path node replaced). This has to be level 1..6
 Everything above the mergeNode is not modified (the newRootNode does not have to be copied
 as it is new)
 All nodes between the old stagingNode and the mergeNode have to be copied
 The old stagingNode itself does not need to be cloned.</div>
</li>
</ul>
<a name="remove(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;remove(int&nbsp;key)</pre>
</li>
</ul>
<a name="set(int,java.lang.Object)">
<!--   -->
</a><a name="set(int, V)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre>public&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;set(int&nbsp;key,
              <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;value)</pre>
<div class="block">this either replaces or adds newElements new value</div>
</li>
</ul>
<a name="setInNewRootLevel(int,int,java.lang.Object)">
<!--   -->
</a><a name="setInNewRootLevel(int, int, V)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setInNewRootLevel</h4>
<pre>protected&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;setInNewRootLevel(int&nbsp;newRootLevel,
                            int&nbsp;key,
                            <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;value)</pre>
</li>
</ul>
<a name="setInCurrentRootLevel(int,java.lang.Object)">
<!--   -->
</a><a name="setInCurrentRootLevel(int, V)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setInCurrentRootLevel</h4>
<pre>protected&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;setInCurrentRootLevel(int&nbsp;key,
                                <a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&nbsp;value)</pre>
<div class="block">that's ugly, but if we use recursion we need newElements result object to obtain the new stagingNode and
 the size change, which means there would be an additional allocation per set() or newElements non-persistent,
 transient object that would need synchronization</div>
</li>
</ul>
<a name="process(gov.nasa.jpf.util.Processor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>process</h4>
<pre>public&nbsp;void&nbsp;process(<a href="../../../../gov/nasa/jpf/util/Processor.html" title="interface in gov.nasa.jpf.util">Processor</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;p)</pre>
</li>
</ul>
<a name="removeAllSatisfying(int, gov.nasa.jpf.util.PSIntMap.Node, gov.nasa.jpf.util.Predicate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAllSatisfying</h4>
<pre>protected final&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;removeAllSatisfying(int&nbsp;level,
                                <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;node,
                                <a href="../../../../gov/nasa/jpf/util/Predicate.html" title="interface in gov.nasa.jpf.util">Predicate</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;pred)</pre>
</li>
</ul>
<a name="removeAllSatisfying(gov.nasa.jpf.util.Predicate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAllSatisfying</h4>
<pre>public&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="class in gov.nasa.jpf.util">PSIntMap</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;removeAllSatisfying(<a href="../../../../gov/nasa/jpf/util/Predicate.html" title="interface in gov.nasa.jpf.util">Predicate</a>&lt;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>&gt;&nbsp;pred)</pre>
</li>
</ul>
<a name="countSize(int, gov.nasa.jpf.util.PSIntMap.Node)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countSize</h4>
<pre>protected final&nbsp;int&nbsp;countSize(int&nbsp;level,
            <a href="../../../../gov/nasa/jpf/util/PSIntMap.Node.html" title="class in gov.nasa.jpf.util">PSIntMap.Node</a>&nbsp;node)</pre>
</li>
</ul>
<a name="values()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>values</h4>
<pre>public&nbsp;<a href="../../../../gov/nasa/jpf/util/PSIntMap.html" title="type parameter in PSIntMap">V</a>[]&nbsp;values()</pre>
</li>
</ul>
<a name="printOn(java.io.PrintStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printOn</h4>
<pre>public&nbsp;void&nbsp;printOn(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;ps)</pre>
</li>
</ul>
<a name="keyDescription(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>keyDescription</h4>
<pre>public&nbsp;<a href="../../../../java/lang/String.html" title="class in java.lang">String</a>&nbsp;keyDescription(int&nbsp;key)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PSIntMap.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/nasa/jpf/util/Processor.html" title="interface in gov.nasa.jpf.util"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/nasa/jpf/util/PSIntMap.BitmapNode.html" title="class in gov.nasa.jpf.util"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/nasa/jpf/util/PSIntMap.html" target="_top">Frames</a></li>
<li><a href="PSIntMap.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
